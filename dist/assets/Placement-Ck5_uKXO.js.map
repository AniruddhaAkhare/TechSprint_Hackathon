{"version":3,"file":"Placement-Ck5_uKXO.js","sources":["../../src/StudentInformation/Placement.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { db } from \"../config/firebase\";\r\nimport { collection, getDocs, query, where, getDoc, doc } from \"firebase/firestore\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nconst Placement = ({ studentId }) => {\r\n  const [placements, setPlacements] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchPlacements = async () => {\r\n      try {\r\n        // Fetch placements for the student\r\n        const placementsQuery = query(\r\n          collection(db, \"Placements\"),\r\n          where(\"studentId\", \"==\", studentId)\r\n        );\r\n        const snapshot = await getDocs(placementsQuery);\r\n\r\n        const placementData = await Promise.all(\r\n          snapshot.docs.map(async (placementDoc) => {\r\n            const placement = { id: placementDoc.id, ...placementDoc.data() };\r\n\r\n            // Fetch job details\r\n            let jobData = {};\r\n            try {\r\n              const jobDoc = await getDoc(doc(db, \"JobOpenings\", placement.jobId));\r\n              if (jobDoc.exists()) {\r\n                jobData = jobDoc.data();\r\n              } else {\r\n                console.warn(`Job with ID ${placement.jobId} not found`);\r\n              }\r\n            } catch (err) {\r\n              console.error(`Error fetching job ${placement.jobId}:`, err);\r\n            }\r\n\r\n            // Fetch application details for createdAt\r\n            let applicationData = {};\r\n            try {\r\n              const applicationQuery = query(\r\n                collection(db, \"Applications\"),\r\n                where(\"studentId\", \"==\", studentId),\r\n                where(\"jobId\", \"==\", placement.jobId)\r\n              );\r\n              const applicationSnapshot = await getDocs(applicationQuery);\r\n              if (!applicationSnapshot.empty) {\r\n                applicationData = applicationSnapshot.docs[0].data();\r\n              } else {\r\n                console.warn(`Application for student ${studentId} and job ${placement.jobId} not found`);\r\n              }\r\n            } catch (err) {\r\n              console.error(`Error fetching application for job ${placement.jobId}:`, err);\r\n            }\r\n\r\n            return {\r\n              ...placement,\r\n              jobTitle: jobData.title || \"N/A\",\r\n              companyName: jobData.companyName || \"N/A\",\r\n              skills: Array.isArray(jobData.skills) ? jobData.skills.join(\", \") : \"N/A\",\r\n              city: jobData.city || \"N/A\",\r\n              jobType: jobData.jobType || \"N/A\",\r\n              deadline: jobData.deadline?.toDate() || \"N/A\",\r\n              salary: jobData.salary || \"N/A\",\r\n              createdAt: applicationData.createdAt || placement.createdAt || null,\r\n            };\r\n          })\r\n        );\r\n\r\n        setPlacements(placementData);\r\n      } catch (err) {\r\n        console.error(\"Error fetching placements:\", err);\r\n        toast.error(\"Failed to fetch placements.\");\r\n      }\r\n    };\r\n\r\n    if (studentId) {\r\n      fetchPlacements();\r\n    }\r\n  }, [studentId]);\r\n\r\n  return (\r\n    <>\r\n      <ToastContainer position=\"top-right\" autoClose={3000} />\r\n      <div className=\"space-y-6\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full table-auto\">\r\n            <thead className=\"bg-gray-100\">\r\n              <tr>\r\n                <th className=\"px-4 py-3 text-left text-base font-semibold text-gray-700\">Job Title</th>\r\n                <th className=\"px-4 py-3 text-left text-base font-semibold text-gray-700\">Company</th>\r\n                <th className=\"px-4 py-3 text-left text-base font-semibold text-gray-700\">Skills</th>\r\n                <th className=\"px-4 py-3 text-left text-base font-semibold text-gray-700\">Salary</th>\r\n                <th className=\"px-4 py-3 text-left text-base font-semibold text-gray-700\">Job Type</th>\r\n                <th className=\"px-4 py-3 text-left text-base font-semibold text-gray-700\">Deadline</th>\r\n                <th className=\"px-4 py-3 text-left text-base font-semibold text-gray-700\">City</th>\r\n                <th className=\"px-4 py-3 text-left text-base font-semibold text-gray-700\">Status</th>\r\n                <th className=\"px-4 py-3 text-left text-base font-semibold text-gray-700\">Created At</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {placements.map((placement) => (\r\n                <tr key={placement.id} className=\"border-b hover:bg-gray-50\">\r\n                  <td className=\"px-4 py-3 text-gray-800\">{placement.jobTitle}</td>\r\n                  <td className=\"px-4 py-3 text-gray-800\">{placement.companyName}</td>\r\n                  <td className=\"px-4 py-3 text-gray-800\">{placement.skills}</td>\r\n                  <td className=\"px-4 py-3 text-gray-800\">{placement.salary}</td>\r\n                  <td className=\"px-4 py-3 text-gray-800\">{placement.jobType}</td>\r\n                  <td className=\"px-4 py-3 text-gray-800\">\r\n                    {placement.deadline instanceof Date\r\n                      ? placement.deadline.toLocaleDateString()\r\n                      : \"N/A\"}\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-gray-800\">{placement.city}</td>\r\n                  <td className=\"px-4 py-3 text-gray-800\">{placement.status}</td>\r\n                  <td className=\"px-4 py-3 text-gray-800\">\r\n                    {placement.createdAt?.toDate\r\n                      ? placement.createdAt.toDate().toLocaleDateString()\r\n                      : \"N/A\"}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n              {placements.length === 0 && (\r\n                <tr>\r\n                  <td colSpan=\"9\" className=\"px-4 py-3 text-gray-500 text-center\">\r\n                    No placements found for this student.\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Placement;"],"names":["Placement","studentId","placements","setPlacements","useState","useEffect","placementsQuery","query","collection","db","where","snapshot","getDocs","placementData","placementDoc","placement","jobData","jobDoc","getDoc","doc","err","applicationData","applicationQuery","applicationSnapshot","_a","toast","jsxs","Fragment","jsx","ToastContainer"],"mappings":"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"}